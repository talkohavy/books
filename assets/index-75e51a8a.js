import{i as oe,h as ve,a as Se,p as we,r as _,j as I,c as q,b as Ie,L as xe}from"./index-ab85d32d.js";import{c as Te}from"./index-62d48765.js";import{w as Ce,I as be,B as _e}from"./Input-feb96159.js";import{Q as Pe,u as Re,a as Le,B as ye}from"./index-c0d18975.js";class Ae extends Pe{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,r){super.setOptions({...e,behavior:oe()},r)}getOptimisticResult(e){return e.behavior=oe(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...r}={}){return this.fetch({...r,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...r}={}){return this.fetch({...r,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,r){var n,i,u,p,f,h;const{state:T}=e,P=super.createResult(e,r),{isFetching:m,isRefetching:v}=P,L=m&&((n=T.fetchMeta)==null||(i=n.fetchMore)==null?void 0:i.direction)==="forward",D=m&&((u=T.fetchMeta)==null||(p=u.fetchMore)==null?void 0:p.direction)==="backward";return{...P,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ve(r,(f=T.data)==null?void 0:f.pages),hasPreviousPage:Se(r,(h=T.data)==null?void 0:h.pages),isFetchingNextPage:L,isFetchingPreviousPage:D,isRefetching:v&&!L&&!D}}}function Oe(t,e,r){const n=we(t,e,r);return Re(n,Ae)}function J(){return J=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J.apply(this,arguments)}function ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},X(t,e)}function Me(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,X(t,e)}var ie=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Fe(t,e){return!!(t===e||ie(t)&&ie(e))}function De(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Fe(t[r],e[r]))return!1;return!0}function K(t,e){e===void 0&&(e=De);var r,n=[],i,u=!1;function p(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return u&&r===this&&e(f,n)||(i=t.apply(this,f),u=!0,r=this,n=f),i}return p}var Ee=typeof performance=="object"&&typeof performance.now=="function",ae=Ee?function(){return performance.now()}:function(){return Date.now()};function se(t){cancelAnimationFrame(t.id)}function Ne(t,e){var r=ae();function n(){ae()-r>=e?t.call(null):i.id=requestAnimationFrame(n)}var i={id:requestAnimationFrame(n)};return i}var Z=-1;function We(t){if(t===void 0&&(t=!1),Z===-1||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(e),Z=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Z}var W=null;function le(t){if(t===void 0&&(t=!1),W===null||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?W="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?W="negative":W="positive-ascending"),document.body.removeChild(e),W}return W}var ke=150,He=function(e){var r=e.columnIndex;e.data;var n=e.rowIndex;return n+":"+r};function je(t){var e,r=t.getColumnOffset,n=t.getColumnStartIndexForOffset,i=t.getColumnStopIndexForStartIndex,u=t.getColumnWidth,p=t.getEstimatedTotalHeight,f=t.getEstimatedTotalWidth,h=t.getOffsetForColumnAndAlignment,T=t.getOffsetForRowAndAlignment,P=t.getRowHeight,m=t.getRowOffset,v=t.getRowStartIndexForOffset,L=t.getRowStopIndexForStartIndex,D=t.initInstanceProps,k=t.shouldResetStyleCacheOnItemSizeChange,H=t.validateProps;return e=function(E){Me(N,E);function N(y){var o;return o=E.call(this,y)||this,o._instanceProps=D(o.props,ne(o)),o._resetIsScrollingTimeoutId=null,o._outerRef=void 0,o.state={instance:ne(o),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof o.props.initialScrollLeft=="number"?o.props.initialScrollLeft:0,scrollTop:typeof o.props.initialScrollTop=="number"?o.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},o._callOnItemsRendered=void 0,o._callOnItemsRendered=K(function(s,a,l,d,c,g,S,C){return o.props.onItemsRendered({overscanColumnStartIndex:s,overscanColumnStopIndex:a,overscanRowStartIndex:l,overscanRowStopIndex:d,visibleColumnStartIndex:c,visibleColumnStopIndex:g,visibleRowStartIndex:S,visibleRowStopIndex:C})}),o._callOnScroll=void 0,o._callOnScroll=K(function(s,a,l,d,c){return o.props.onScroll({horizontalScrollDirection:l,scrollLeft:s,scrollTop:a,verticalScrollDirection:d,scrollUpdateWasRequested:c})}),o._getItemStyle=void 0,o._getItemStyle=function(s,a){var l=o.props,d=l.columnWidth,c=l.direction,g=l.rowHeight,S=o._getItemStyleCache(k&&d,k&&c,k&&g),C=s+":"+a,x;if(S.hasOwnProperty(C))x=S[C];else{var b=r(o.props,a,o._instanceProps),w=c==="rtl";S[C]=x={position:"absolute",left:w?void 0:b,right:w?b:void 0,top:m(o.props,s,o._instanceProps),height:P(o.props,s,o._instanceProps),width:u(o.props,a,o._instanceProps)}}return x},o._getItemStyleCache=void 0,o._getItemStyleCache=K(function(s,a,l){return{}}),o._onScroll=function(s){var a=s.currentTarget,l=a.clientHeight,d=a.clientWidth,c=a.scrollLeft,g=a.scrollTop,S=a.scrollHeight,C=a.scrollWidth;o.setState(function(x){if(x.scrollLeft===c&&x.scrollTop===g)return null;var b=o.props.direction,w=c;if(b==="rtl")switch(le()){case"negative":w=-c;break;case"positive-descending":w=C-d-c;break}w=Math.max(0,Math.min(w,C-d));var R=Math.max(0,Math.min(g,S-l));return{isScrolling:!0,horizontalScrollDirection:x.scrollLeft<c?"forward":"backward",scrollLeft:w,scrollTop:R,verticalScrollDirection:x.scrollTop<g?"forward":"backward",scrollUpdateWasRequested:!1}},o._resetIsScrollingDebounced)},o._outerRefSetter=function(s){var a=o.props.outerRef;o._outerRef=s,typeof a=="function"?a(s):a!=null&&typeof a=="object"&&a.hasOwnProperty("current")&&(a.current=s)},o._resetIsScrollingDebounced=function(){o._resetIsScrollingTimeoutId!==null&&se(o._resetIsScrollingTimeoutId),o._resetIsScrollingTimeoutId=Ne(o._resetIsScrolling,ke)},o._resetIsScrolling=function(){o._resetIsScrollingTimeoutId=null,o.setState({isScrolling:!1},function(){o._getItemStyleCache(-1)})},o}N.getDerivedStateFromProps=function(o,s){return Ve(o,s),H(o),null};var O=N.prototype;return O.scrollTo=function(o){var s=o.scrollLeft,a=o.scrollTop;s!==void 0&&(s=Math.max(0,s)),a!==void 0&&(a=Math.max(0,a)),this.setState(function(l){return s===void 0&&(s=l.scrollLeft),a===void 0&&(a=l.scrollTop),l.scrollLeft===s&&l.scrollTop===a?null:{horizontalScrollDirection:l.scrollLeft<s?"forward":"backward",scrollLeft:s,scrollTop:a,scrollUpdateWasRequested:!0,verticalScrollDirection:l.scrollTop<a?"forward":"backward"}},this._resetIsScrollingDebounced)},O.scrollToItem=function(o){var s=o.align,a=s===void 0?"auto":s,l=o.columnIndex,d=o.rowIndex,c=this.props,g=c.columnCount,S=c.height,C=c.rowCount,x=c.width,b=this.state,w=b.scrollLeft,R=b.scrollTop,A=We();l!==void 0&&(l=Math.max(0,Math.min(l,g-1))),d!==void 0&&(d=Math.max(0,Math.min(d,C-1)));var M=p(this.props,this._instanceProps),F=f(this.props,this._instanceProps),j=F>x?A:0,V=M>S?A:0;this.scrollTo({scrollLeft:l!==void 0?h(this.props,l,a,w,this._instanceProps,V):w,scrollTop:d!==void 0?T(this.props,d,a,R,this._instanceProps,j):R})},O.componentDidMount=function(){var o=this.props,s=o.initialScrollLeft,a=o.initialScrollTop;if(this._outerRef!=null){var l=this._outerRef;typeof s=="number"&&(l.scrollLeft=s),typeof a=="number"&&(l.scrollTop=a)}this._callPropsCallbacks()},O.componentDidUpdate=function(){var o=this.props.direction,s=this.state,a=s.scrollLeft,l=s.scrollTop,d=s.scrollUpdateWasRequested;if(d&&this._outerRef!=null){var c=this._outerRef;if(o==="rtl")switch(le()){case"negative":c.scrollLeft=-a;break;case"positive-ascending":c.scrollLeft=a;break;default:var g=c.clientWidth,S=c.scrollWidth;c.scrollLeft=S-g-a;break}else c.scrollLeft=Math.max(0,a);c.scrollTop=Math.max(0,l)}this._callPropsCallbacks()},O.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&se(this._resetIsScrollingTimeoutId)},O.render=function(){var o=this.props,s=o.children,a=o.className,l=o.columnCount,d=o.direction,c=o.height,g=o.innerRef,S=o.innerElementType,C=o.innerTagName,x=o.itemData,b=o.itemKey,w=b===void 0?He:b,R=o.outerElementType,A=o.outerTagName,M=o.rowCount,F=o.style,j=o.useIsScrolling,V=o.width,Y=this.state.isScrolling,$=this._getHorizontalRangeToRender(),Q=$[0],de=$[1],te=this._getVerticalRangeToRender(),fe=te[0],pe=te[1],re=[];if(l>0&&M)for(var z=fe;z<=pe;z++)for(var B=Q;B<=de;B++)re.push(_.createElement(s,{columnIndex:B,data:x,isScrolling:j?Y:void 0,key:w({columnIndex:B,data:x,rowIndex:z}),rowIndex:z,style:this._getItemStyle(z,B)}));var me=p(this.props,this._instanceProps),ge=f(this.props,this._instanceProps);return _.createElement(R||A||"div",{className:a,onScroll:this._onScroll,ref:this._outerRefSetter,style:J({position:"relative",height:c,width:V,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:d},F)},_.createElement(S||C||"div",{children:re,ref:g,style:{height:me,pointerEvents:Y?"none":void 0,width:ge}}))},O._callPropsCallbacks=function(){var o=this.props,s=o.columnCount,a=o.onItemsRendered,l=o.onScroll,d=o.rowCount;if(typeof a=="function"&&s>0&&d>0){var c=this._getHorizontalRangeToRender(),g=c[0],S=c[1],C=c[2],x=c[3],b=this._getVerticalRangeToRender(),w=b[0],R=b[1],A=b[2],M=b[3];this._callOnItemsRendered(g,S,w,R,C,x,A,M)}if(typeof l=="function"){var F=this.state,j=F.horizontalScrollDirection,V=F.scrollLeft,Y=F.scrollTop,$=F.scrollUpdateWasRequested,Q=F.verticalScrollDirection;this._callOnScroll(V,Y,j,Q,$)}},O._getHorizontalRangeToRender=function(){var o=this.props,s=o.columnCount,a=o.overscanColumnCount,l=o.overscanColumnsCount,d=o.overscanCount,c=o.rowCount,g=this.state,S=g.horizontalScrollDirection,C=g.isScrolling,x=g.scrollLeft,b=a||l||d||1;if(s===0||c===0)return[0,0,0,0];var w=n(this.props,x,this._instanceProps),R=i(this.props,w,x,this._instanceProps),A=!C||S==="backward"?Math.max(1,b):1,M=!C||S==="forward"?Math.max(1,b):1;return[Math.max(0,w-A),Math.max(0,Math.min(s-1,R+M)),w,R]},O._getVerticalRangeToRender=function(){var o=this.props,s=o.columnCount,a=o.overscanCount,l=o.overscanRowCount,d=o.overscanRowsCount,c=o.rowCount,g=this.state,S=g.isScrolling,C=g.verticalScrollDirection,x=g.scrollTop,b=l||d||a||1;if(s===0||c===0)return[0,0,0,0];var w=v(this.props,x,this._instanceProps),R=L(this.props,w,x,this._instanceProps),A=!S||C==="backward"?Math.max(1,b):1,M=!S||C==="forward"?Math.max(1,b):1;return[Math.max(0,w-A),Math.max(0,Math.min(c-1,R+M)),w,R]},N}(_.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var Ve=function(e,r){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,r.instance},ze=je({getColumnOffset:function(e,r){var n=e.columnWidth;return r*n},getColumnWidth:function(e,r){var n=e.columnWidth;return n},getRowOffset:function(e,r){var n=e.rowHeight;return r*n},getRowHeight:function(e,r){var n=e.rowHeight;return n},getEstimatedTotalHeight:function(e){var r=e.rowCount,n=e.rowHeight;return n*r},getEstimatedTotalWidth:function(e){var r=e.columnCount,n=e.columnWidth;return n*r},getOffsetForColumnAndAlignment:function(e,r,n,i,u,p){var f=e.columnCount,h=e.columnWidth,T=e.width,P=Math.max(0,f*h-T),m=Math.min(P,r*h),v=Math.max(0,r*h-T+p+h);switch(n==="smart"&&(i>=v-T&&i<=m+T?n="auto":n="center"),n){case"start":return m;case"end":return v;case"center":var L=Math.round(v+(m-v)/2);return L<Math.ceil(T/2)?0:L>P+Math.floor(T/2)?P:L;case"auto":default:return i>=v&&i<=m?i:v>m||i<v?v:m}},getOffsetForRowAndAlignment:function(e,r,n,i,u,p){var f=e.rowHeight,h=e.height,T=e.rowCount,P=Math.max(0,T*f-h),m=Math.min(P,r*f),v=Math.max(0,r*f-h+p+f);switch(n==="smart"&&(i>=v-h&&i<=m+h?n="auto":n="center"),n){case"start":return m;case"end":return v;case"center":var L=Math.round(v+(m-v)/2);return L<Math.ceil(h/2)?0:L>P+Math.floor(h/2)?P:L;case"auto":default:return i>=v&&i<=m?i:v>m||i<v?v:m}},getColumnStartIndexForOffset:function(e,r){var n=e.columnWidth,i=e.columnCount;return Math.max(0,Math.min(i-1,Math.floor(r/n)))},getColumnStopIndexForStartIndex:function(e,r,n){var i=e.columnWidth,u=e.columnCount,p=e.width,f=r*i,h=Math.ceil((p+n-f)/i);return Math.max(0,Math.min(u-1,r+h-1))},getRowStartIndexForOffset:function(e,r){var n=e.rowHeight,i=e.rowCount;return Math.max(0,Math.min(i-1,Math.floor(r/n)))},getRowStopIndexForStartIndex:function(e,r,n){var i=e.rowHeight,u=e.rowCount,p=e.height,f=r*i,h=Math.ceil((p+n-f)/i);return Math.max(0,Math.min(u-1,r+h-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}});const Be={SHOW_ALL_PAGES:({curPage:t,pageNumbersArr:e})=>e.map(r=>({isCurrentPage:t==r,pageNumber:r})),DISPLAY_FIRST_FIVE_AND_LAST:({curPage:t,numOfPages:e})=>{const r=[];for(let n=1;n<=5;n++)r.push({isCurrentPage:t==n,pageNumber:n});return r.push({isThreeDots:!0,pageNumber:-2},{isLastPage:!0,pageNumber:e}),r},DISPLAY_FIRST_AND_FIVE_LAST:({curPage:t,numOfPages:e})=>{const r=[];r.push({pageNumber:1},{isThreeDots:!0,pageNumber:-1});for(let n=e-5;n<=e;n++)r.push({isCurrentPage:t==n,pageNumber:n});return r},DISPLAY_FIRST_LAST_AND_FIVE_IN_MIDDLE:({curPage:t,numOfPages:e})=>{const r=[];r.push({pageNumber:1},{isThreeDots:!0,pageNumber:-1});for(let n=t-2;n<=t+2;n++)r.push({isCurrentPage:t==n,pageNumber:n});return r.push({isThreeDots:!0,pageNumber:-2},{pageNumber:e}),r}},U={SHOW_ALL_PAGES:"SHOW_ALL_PAGES",DISPLAY_FIRST_FIVE_AND_LAST:"DISPLAY_FIRST_FIVE_AND_LAST",DISPLAY_FIRST_AND_FIVE_LAST:"DISPLAY_FIRST_AND_FIVE_LAST",DISPLAY_FIRST_LAST_AND_FIVE_IN_MIDDLE:"DISPLAY_FIRST_LAST_AND_FIVE_IN_MIDDLE"};function Ge({numOfPages:t,curPage:e}){let r="";return t<=8?r=U.SHOW_ALL_PAGES:e<=4?r=U.DISPLAY_FIRST_FIVE_AND_LAST:e>=t-3?r=U.DISPLAY_FIRST_AND_FIVE_LAST:r=U.DISPLAY_FIRST_LAST_AND_FIVE_IN_MIDDLE,r}function Ye({pageNumber:t,className:e,onClick:r}){return I.jsx("div",{onClick:r,className:e,children:t},t)}function $e({curPage:t,setCurPage:e,numOfPages:r}){return I.jsx("span",{className:q("flex h-7 w-7 cursor-pointer select-none items-center justify-center rounded-full bg-gray-600 pb-1 text-center text-lg text-white dark:bg-amber-400 dark:text-black",t==r?"cursor-default bg-neutral-300 dark:bg-transparent":"hover:bg-black active:bg-gray-400 dark:hover:bg-black dark:hover:text-white dark:active:bg-yellow-600"),onClick:()=>t<r&&e(t+1),children:"»"})}function Ue({currentPage:t,setCurPage:e}){return I.jsx("span",{className:q("flex h-7 w-7 cursor-pointer select-none items-center justify-center rounded-full bg-gray-600 pb-1 text-center text-lg text-white",t==1?"cursor-default bg-neutral-300 dark:bg-transparent":"hover:bg-black active:bg-gray-400"),onClick:()=>t>1&&e(t-1),children:"«"})}function qe(){return I.jsx("span",{className:"w-auto",children:"..."})}function Qe({curPage:t,setCurPage:e,totalNumOfItems:r,perPage:n}){const i=_.useMemo(()=>Math.ceil(r/n),[r,n]),u=_.useMemo(()=>Array.from(Array(i).keys()).map(h=>h+1),[i]),p=_.useMemo(()=>parseInt(t),[t]),f=_.useMemo(()=>{const h=Ge({curPage:p,numOfPages:i});return Be[h]({curPage:p,numOfPages:i,pageNumbersArr:u})},[i,p,u]);return I.jsx("div",{className:"flex h-10 w-full max-w-xl items-center justify-around dark:text-white",children:i?I.jsxs(I.Fragment,{children:[I.jsx(Ue,{currentPage:p,setCurPage:e}),f.map(({isThreeDots:h,isCurrentPage:T,pageNumber:P})=>h?I.jsx(qe,{},P):I.jsx(Ye,{pageNumber:P,onClick:()=>!T&&e(P),className:q("w-auto rounded-md px-2 py-1 text-lg no-underline",T?"cursor-default bg-red-500 text-white":"cursor-pointer hover:bg-slate-200 dark:hover:bg-red-800")},P)),I.jsx($e,{curPage:p,setCurPage:e,numOfPages:i})]}):null})}function Ke({eventType:t,fnToRun:e,dependencies:r=[],element:n=window,shouldNotRender:i}){const u=_.useRef(e);_.useEffect(()=>(u.current=e,void 0),[e]),_.useEffect(()=>{if(!i)return n.addEventListener(t,u.current),u.current(),()=>n.removeEventListener(t,u.current)},r)}function Ze({wrapperRef:t,fnToRun:e,ms:r=300,shouldNotRender:n}){const[i,u]=_.useState({width:0,height:0}),p=_.useCallback(Ce(()=>{const{width:f,height:h}=t.current.getBoundingClientRect(),T={width:f,height:h};u(T),e==null||e(T)},r),[]);return Ke({eventType:"resize",fnToRun:p,dependencies:[n],shouldNotRender:n}),i}function Je({value:t,setValue:e,options:r,placeholder:n="",className:i=void 0}){return I.jsx("select",{value:t,onChange:e,className:q("h-8 cursor-pointer rounded-md border hover:border-blue-400 focus:border-blue-600",i),placeholder:n,children:r.map(({key:u,value:p,label:f})=>I.jsx("option",{value:p,children:f},u??p))})}function Xe({searchText:t,setSearchText:e,onSearchClick:r,viewType:n,setViewType:i,viewTypeOptions:u}){return I.jsxs("div",{className:"flex items-center justify-start gap-3",children:[I.jsx(Je,{value:n,setValue:i,options:u,className:"!h-10 w-36 border-black"}),I.jsx(be,{value:t,setValue:e,className:"!w-60 max-w-full"}),I.jsx(_e,{isDisabled:!t,onClick:r,className:"h-10 w-20 rounded-xl border border-black bg-blue-600 p-1 text-white hover:rounded-2xl hover:bg-blue-500 focus:bg-blue-700",children:"Search"})]})}const ce={10:{value:10,label:"Show 10"},20:{value:20,label:"Show 20"},50:{value:50,label:"Show 50"},null:{value:0,label:"Show all"}};Object.keys(ce).map(t=>ce[t]);const ue=20,G=24,et=800,tt=20,ee={PaginationView:{value:"PaginationView",label:"Pagination"},InfiniteScrollView:{value:"InfiniteScrollView",label:"Infinite Scroll"}},rt=Object.values(ee);function he(t){return t>1280?{cardsPerRow:4,columnWidth:300,rowHeight:300}:t>930?{cardsPerRow:3,columnWidth:300,rowHeight:300}:t>640?{cardsPerRow:2,columnWidth:300,rowHeight:300}:{cardsPerRow:1,columnWidth:420,rowHeight:420}}const ot="QID_BOOKS_DATA_INFINITE";async function nt({queryKey:t}){const r={params:{startIndex:Math.max(t[3]-1,0)*t[2],q:t[1]||"search+terms",maxResults:t[2]}};return Le.get("https://www.googleapis.com/books/v1/volumes",r)}function it({itemsPerPage:t,searchText:e,curPage:r,curViewType:n}={}){return!t&&(t=G),Oe({queryKey:[ot,e,t,r,n],queryFn:nt,cacheTime:3e5,refetchOnWindowFocus:!1,keepPreviousData:!0,select:({pageParams:i,pages:u})=>({pageParams:i,pages:u.map(p=>p.data)}),getNextPageParam:(i,u)=>u.length+1})}function ut(){const t=_.useRef(null),[e,r]=Ie(xe),[n,i]=_.useState(1),[u,p]=_.useState(()=>he(window.innerWidth)),[f,h]=_.useState(""),[T,P]=_.useState(""),{data:m,isLoading:v,isFetching:L,fetchNextPage:D}=it({itemsPerPage:G,searchText:T,curViewType:e,curPage:n}),k=_.useMemo(()=>{var a;return((a=m==null?void 0:m.pages)==null?void 0:a.flatMap(l=>l.items).filter(Boolean))??[]},[m]),H=m?m.pages[0].totalItems:0,E=k.length,N=G/u.cardsPerRow,O=Math.ceil(E/u.cardsPerRow),y=_.useCallback(()=>{i(1),P(f)},[f]),o=_.useCallback(a=>{var l,d;if(a){const c=a.firstElementChild.firstElementChild,g=c.style.height,S=(d=(l=c.lastElementChild)==null?void 0:l.style)==null?void 0:d.top;if(!S)return;parseFloat(g)-parseFloat(S)<et&&!L&&E<H&&D()}},[D,L,E,H]),{height:s}=Ze({wrapperRef:t,shouldNotRender:!m,fnToRun:({width:a})=>{p(he(a))},ms:0});return _.useEffect(()=>{},[v]),_.useEffect(()=>{o(t.current)},[o]),v?I.jsx("div",{children:"loading..."}):I.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-start gap-6 p-10",children:[I.jsx(Xe,{searchText:f,setSearchText:h,onSearchClick:y,viewType:e,setViewType:a=>r(a.target.value),viewTypeOptions:rt}),I.jsx("div",{className:"flex h-[calc(100%-12rem)] w-full flex-1 flex-col items-center justify-center",ref:t,children:I.jsx(ze,{width:u.columnWidth*u.cardsPerRow+tt,height:s,columnWidth:u.columnWidth,columnCount:u.cardsPerRow,rowCount:O,rowHeight:u.rowHeight,onScroll:()=>e===ee.InfiniteScrollView.value&&o(t.current),children:({columnIndex:a,rowIndex:l,style:d})=>{const c=Math.floor(l/N),g=(l*u.cardsPerRow+a)%G,S=m==null?void 0:m.pages[c].items[g],{volumeInfo:C,id:x}=S??{},{title:b,pageCount:w,publishedDate:R,imageLinks:A}=C??{};return S&&I.jsx("div",{style:{...d,left:d.left,top:d.top,width:d.width-ue,height:d.height-ue},children:I.jsx(ye,{id:x,title:b,pageCount:w,publishedDate:R,imageLinks:A,isFavored:Te(x)},g)})}})}),e===ee.PaginationView.value&&I.jsx(Qe,{perPage:G,curPage:n,setCurPage:i,totalNumOfItems:H})]})}export{ut as default};
//# sourceMappingURL=index-75e51a8a.js.map
